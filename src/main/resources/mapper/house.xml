<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.vue.house.model.mapper.HouseMapper">

    <insert id="saveHouse" parameterType="houseDto">
        insert ignore into house (
            house_id, build_year, road_name, road_name_bonbun, road_name_bubun, road_name_sigungu_code, road_name_code, dong, bonbun, bubun, apartment_name, jibun
        ) values (
      #{houseId},
      #{buildYear},
      #{roadName},
      #{roadNameBonbun},
      #{roadNameBubun},
      #{roadNameSigunguCode},
      #{roadNameCode},
      #{dong},
      #{bonbun},
      #{bubun},
      #{apartmentName},
      #{jibun}
                         )
    </insert>

    <insert id="saveHouseDeal" parameterType="houseDealDto">
        insert into housedeal(
            house_id, deal_amount, area, deal_year, deal_month, deal_day, floor
        ) values (
              #{houseId},
              #{dealAmount},
              #{area},
              #{dealYear},
              #{dealMonth},
              #{dealDay},
              #{floor}
        )
    </insert>

    <select id="findHouseDealByHouseAndDong" parameterType="houseRequestDto" resultType="houseResponseDto">
        select *
        from houseDeal d left join house h
        on #{houseId} = #{houseDealId}
        where h.dong = #{dong};
    </select>


</mapper>